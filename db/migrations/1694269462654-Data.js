module.exports = class Data1694269462654 {
    name = 'Data1694269462654'

    async up(db) {
        await db.query(`CREATE TABLE "history" ("id" character varying NOT NULL, "value" numeric NOT NULL, "balance" numeric NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "block_number" integer NOT NULL, "tx_hash" text NOT NULL, "type" text NOT NULL, "address_id" character varying, CONSTRAINT "PK_9384942edf4804b38ca0ee51416" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_59a55adcc59ddb69c297da693e" ON "history" ("address_id") `)
        await db.query(`CREATE INDEX "IDX_7a259431108a22e8ca2f375fc7" ON "history" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_1b82c15d87635d95eaa4dd42ec" ON "history" ("tx_hash") `)
        await db.query(`CREATE TABLE "address" ("id" character varying NOT NULL, "is_contract" boolean NOT NULL, "rebasing_option" text NOT NULL, "balance" numeric NOT NULL, "earned" numeric NOT NULL, "credits" numeric NOT NULL, "last_updated" TIMESTAMP WITH TIME ZONE NOT NULL, "ogv_votes" numeric NOT NULL, CONSTRAINT "PK_d92de1f82754668b5f5f5dd4fd5" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "apy" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "block_number" integer NOT NULL, "tx_hash" text NOT NULL, "apr" numeric NOT NULL, "apy" numeric NOT NULL, "apy7_day_avg" numeric NOT NULL, "apy14_day_avg" numeric NOT NULL, "apy30_day_avg" numeric NOT NULL, "rebasing_credits_per_token" numeric NOT NULL, CONSTRAINT "PK_7826924ff9c029af7533753f6af" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_1f069a908b679be0b5fbc0b2e6" ON "apy" ("timestamp") `)
        await db.query(`CREATE INDEX "IDX_7fb752652a983d6629a722ae7a" ON "apy" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_d1165411d71160d1230073d0fa" ON "apy" ("tx_hash") `)
        await db.query(`CREATE TABLE "rebase" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "block_number" integer NOT NULL, "tx_hash" text NOT NULL, "total_supply" numeric NOT NULL, "rebasing_credits" numeric NOT NULL, "rebasing_credits_per_token" numeric NOT NULL, "apy_id" character varying, CONSTRAINT "PK_cadd381a400a7e41b538c788d13" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_c308a9ecd3d05b0c45e7c60d10" ON "rebase" ("timestamp") `)
        await db.query(`CREATE INDEX "IDX_a5955dbd9ac031314697cbd54f" ON "rebase" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_7cd793b6c4bc15b9082e0eb97a" ON "rebase" ("tx_hash") `)
        await db.query(`CREATE INDEX "IDX_02d02f9022ef86e60f1a84b9dc" ON "rebase" ("apy_id") `)
        await db.query(`CREATE TABLE "proposal" ("id" character varying NOT NULL, "description" text, "created_at" TIMESTAMP WITH TIME ZONE NOT NULL, "status" integer NOT NULL, "proposer_id" character varying, CONSTRAINT "PK_ca872ecfe4fef5720d2d39e4275" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_fc05c9a1fe472dcdcb98d8a6c4" ON "proposal" ("proposer_id") `)
        await db.query(`CREATE TABLE "proposal_tx_log" ("id" character varying NOT NULL, "hash" text NOT NULL, "event" text NOT NULL, "created_at" TIMESTAMP WITH TIME ZONE NOT NULL, "proposal_id" character varying, CONSTRAINT "PK_78d23889a77acb59ed2dd958f62" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_48e25a265f025d2af36408c363" ON "proposal_tx_log" ("proposal_id") `)
        await db.query(`CREATE TABLE "ogv_lockup" ("id" character varying NOT NULL, "lockup_id" integer NOT NULL, "amount" numeric NOT NULL, "end" TIMESTAMP WITH TIME ZONE NOT NULL, "created_at" TIMESTAMP WITH TIME ZONE NOT NULL, "active" boolean, "user_id" character varying, CONSTRAINT "PK_6b6d5ed3a004dd3f546c1b11fa4" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_8114101b53d9d6bc26fe80838a" ON "ogv_lockup" ("lockup_id") `)
        await db.query(`CREATE INDEX "IDX_68196d05980ea88ac254076f67" ON "ogv_lockup" ("user_id") `)
        await db.query(`CREATE TABLE "ogv_lockup_tx_log" ("id" character varying NOT NULL, "hash" text NOT NULL, "event" text NOT NULL, "created_at" TIMESTAMP WITH TIME ZONE NOT NULL, "ogv_lockup_id" character varying, CONSTRAINT "PK_1c4a8425ce42f0c9da10056adee" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_b49fca291c97d9b55cd91f935f" ON "ogv_lockup_tx_log" ("ogv_lockup_id") `)
        await db.query(`CREATE TABLE "ogv_proposal_voter" ("id" character varying NOT NULL, "proposal_id" character varying, "voter_id" character varying, CONSTRAINT "PK_5a296bd7a618b75b5da0527f761" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_7b3e7fcd2895ba1d6803e42454" ON "ogv_proposal_voter" ("proposal_id") `)
        await db.query(`CREATE INDEX "IDX_39efda99c037122170e2fed29b" ON "ogv_proposal_voter" ("voter_id") `)
        await db.query(`ALTER TABLE "history" ADD CONSTRAINT "FK_59a55adcc59ddb69c297da693e5" FOREIGN KEY ("address_id") REFERENCES "address"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "rebase" ADD CONSTRAINT "FK_02d02f9022ef86e60f1a84b9dc2" FOREIGN KEY ("apy_id") REFERENCES "apy"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "proposal" ADD CONSTRAINT "FK_fc05c9a1fe472dcdcb98d8a6c4c" FOREIGN KEY ("proposer_id") REFERENCES "address"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "proposal_tx_log" ADD CONSTRAINT "FK_48e25a265f025d2af36408c3631" FOREIGN KEY ("proposal_id") REFERENCES "proposal"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "ogv_lockup" ADD CONSTRAINT "FK_68196d05980ea88ac254076f67a" FOREIGN KEY ("user_id") REFERENCES "address"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "ogv_lockup_tx_log" ADD CONSTRAINT "FK_b49fca291c97d9b55cd91f935f3" FOREIGN KEY ("ogv_lockup_id") REFERENCES "ogv_lockup"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "ogv_proposal_voter" ADD CONSTRAINT "FK_7b3e7fcd2895ba1d6803e42454b" FOREIGN KEY ("proposal_id") REFERENCES "proposal"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "ogv_proposal_voter" ADD CONSTRAINT "FK_39efda99c037122170e2fed29b1" FOREIGN KEY ("voter_id") REFERENCES "address"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    }

    async down(db) {
        await db.query(`DROP TABLE "history"`)
        await db.query(`DROP INDEX "public"."IDX_59a55adcc59ddb69c297da693e"`)
        await db.query(`DROP INDEX "public"."IDX_7a259431108a22e8ca2f375fc7"`)
        await db.query(`DROP INDEX "public"."IDX_1b82c15d87635d95eaa4dd42ec"`)
        await db.query(`DROP TABLE "address"`)
        await db.query(`DROP TABLE "apy"`)
        await db.query(`DROP INDEX "public"."IDX_1f069a908b679be0b5fbc0b2e6"`)
        await db.query(`DROP INDEX "public"."IDX_7fb752652a983d6629a722ae7a"`)
        await db.query(`DROP INDEX "public"."IDX_d1165411d71160d1230073d0fa"`)
        await db.query(`DROP TABLE "rebase"`)
        await db.query(`DROP INDEX "public"."IDX_c308a9ecd3d05b0c45e7c60d10"`)
        await db.query(`DROP INDEX "public"."IDX_a5955dbd9ac031314697cbd54f"`)
        await db.query(`DROP INDEX "public"."IDX_7cd793b6c4bc15b9082e0eb97a"`)
        await db.query(`DROP INDEX "public"."IDX_02d02f9022ef86e60f1a84b9dc"`)
        await db.query(`DROP TABLE "proposal"`)
        await db.query(`DROP INDEX "public"."IDX_fc05c9a1fe472dcdcb98d8a6c4"`)
        await db.query(`DROP TABLE "proposal_tx_log"`)
        await db.query(`DROP INDEX "public"."IDX_48e25a265f025d2af36408c363"`)
        await db.query(`DROP TABLE "ogv_lockup"`)
        await db.query(`DROP INDEX "public"."IDX_8114101b53d9d6bc26fe80838a"`)
        await db.query(`DROP INDEX "public"."IDX_68196d05980ea88ac254076f67"`)
        await db.query(`DROP TABLE "ogv_lockup_tx_log"`)
        await db.query(`DROP INDEX "public"."IDX_b49fca291c97d9b55cd91f935f"`)
        await db.query(`DROP TABLE "ogv_proposal_voter"`)
        await db.query(`DROP INDEX "public"."IDX_7b3e7fcd2895ba1d6803e42454"`)
        await db.query(`DROP INDEX "public"."IDX_39efda99c037122170e2fed29b"`)
        await db.query(`ALTER TABLE "history" DROP CONSTRAINT "FK_59a55adcc59ddb69c297da693e5"`)
        await db.query(`ALTER TABLE "rebase" DROP CONSTRAINT "FK_02d02f9022ef86e60f1a84b9dc2"`)
        await db.query(`ALTER TABLE "proposal" DROP CONSTRAINT "FK_fc05c9a1fe472dcdcb98d8a6c4c"`)
        await db.query(`ALTER TABLE "proposal_tx_log" DROP CONSTRAINT "FK_48e25a265f025d2af36408c3631"`)
        await db.query(`ALTER TABLE "ogv_lockup" DROP CONSTRAINT "FK_68196d05980ea88ac254076f67a"`)
        await db.query(`ALTER TABLE "ogv_lockup_tx_log" DROP CONSTRAINT "FK_b49fca291c97d9b55cd91f935f3"`)
        await db.query(`ALTER TABLE "ogv_proposal_voter" DROP CONSTRAINT "FK_7b3e7fcd2895ba1d6803e42454b"`)
        await db.query(`ALTER TABLE "ogv_proposal_voter" DROP CONSTRAINT "FK_39efda99c037122170e2fed29b1"`)
    }
}
