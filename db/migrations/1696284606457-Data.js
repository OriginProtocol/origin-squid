module.exports = class Data1696284606457 {
    name = 'Data1696284606457'

    async up(db) {
        await db.query(`CREATE TABLE "oeth" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "block_number" integer NOT NULL, "total_supply" numeric NOT NULL, "rebasing_supply" numeric NOT NULL, "non_rebasing_supply" numeric NOT NULL, CONSTRAINT "PK_de1d885501070dbd1ab6f8577ba" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_5b81a67229bac2d68e0dc92cc4" ON "oeth" ("timestamp") `)
        await db.query(`CREATE INDEX "IDX_408e5f79f83093aa5cf2b0ea32" ON "oeth" ("block_number") `)
        await db.query(`CREATE TABLE "history" ("id" character varying NOT NULL, "value" numeric NOT NULL, "balance" numeric NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "block_number" integer NOT NULL, "tx_hash" text NOT NULL, "type" character varying(8) NOT NULL, "address_id" character varying, CONSTRAINT "PK_9384942edf4804b38ca0ee51416" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_59a55adcc59ddb69c297da693e" ON "history" ("address_id") `)
        await db.query(`CREATE INDEX "IDX_7a259431108a22e8ca2f375fc7" ON "history" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_1b82c15d87635d95eaa4dd42ec" ON "history" ("tx_hash") `)
        await db.query(`CREATE TABLE "address" ("id" character varying NOT NULL, "is_contract" boolean NOT NULL, "rebasing_option" character varying(6) NOT NULL, "balance" numeric NOT NULL, "earned" numeric NOT NULL, "credits" numeric NOT NULL, "last_updated" TIMESTAMP WITH TIME ZONE NOT NULL, CONSTRAINT "PK_d92de1f82754668b5f5f5dd4fd5" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "apy" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "block_number" integer NOT NULL, "tx_hash" text NOT NULL, "apr" numeric NOT NULL, "apy" numeric NOT NULL, "apy7_day_avg" numeric NOT NULL, "apy14_day_avg" numeric NOT NULL, "apy30_day_avg" numeric NOT NULL, "rebasing_credits_per_token" numeric NOT NULL, CONSTRAINT "PK_7826924ff9c029af7533753f6af" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_1f069a908b679be0b5fbc0b2e6" ON "apy" ("timestamp") `)
        await db.query(`CREATE INDEX "IDX_7fb752652a983d6629a722ae7a" ON "apy" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_d1165411d71160d1230073d0fa" ON "apy" ("tx_hash") `)
        await db.query(`CREATE TABLE "rebase" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "block_number" integer NOT NULL, "tx_hash" text NOT NULL, "total_supply" numeric NOT NULL, "rebasing_credits" numeric NOT NULL, "rebasing_credits_per_token" numeric NOT NULL, "fee" numeric NOT NULL, "yield" numeric NOT NULL, "apy_id" character varying, CONSTRAINT "PK_cadd381a400a7e41b538c788d13" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_c308a9ecd3d05b0c45e7c60d10" ON "rebase" ("timestamp") `)
        await db.query(`CREATE INDEX "IDX_a5955dbd9ac031314697cbd54f" ON "rebase" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_7cd793b6c4bc15b9082e0eb97a" ON "rebase" ("tx_hash") `)
        await db.query(`CREATE INDEX "IDX_02d02f9022ef86e60f1a84b9dc" ON "rebase" ("apy_id") `)
        await db.query(`CREATE TABLE "rebase_option" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "block_number" integer NOT NULL, "tx_hash" text NOT NULL, "status" character varying(6) NOT NULL, "address_id" character varying, CONSTRAINT "PK_426a38c91faad05465d687740ea" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_751e6b6352737ddf4f0da0d6d8" ON "rebase_option" ("timestamp") `)
        await db.query(`CREATE INDEX "IDX_e59c9a534fcf23a97a8ac92afa" ON "rebase_option" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_6b6c08ec25dacd1a5bd6170152" ON "rebase_option" ("tx_hash") `)
        await db.query(`CREATE INDEX "IDX_66c04aee6855c74debae4add8f" ON "rebase_option" ("address_id") `)
        await db.query(`CREATE TABLE "vault" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "block_number" integer NOT NULL, "weth" numeric NOT NULL, "st_eth" numeric NOT NULL, "r_eth" numeric NOT NULL, "frx_eth" numeric NOT NULL, CONSTRAINT "PK_dd0898234c77f9d97585171ac59" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_0f1a5b7e346813a4ec3a03010b" ON "vault" ("timestamp") `)
        await db.query(`CREATE INDEX "IDX_a9b314451a9001a7b0a222f68a" ON "vault" ("block_number") `)
        await db.query(`CREATE TABLE "curve_lp" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "block_number" integer NOT NULL, "total_supply" numeric NOT NULL, "eth" numeric NOT NULL, "oeth" numeric NOT NULL, "total_supply_owned" numeric NOT NULL, "eth_owned" numeric NOT NULL, "oeth_owned" numeric NOT NULL, CONSTRAINT "PK_78cd36e42a49ac6ca38349e93ca" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_330db36ce24d451bd225362497" ON "curve_lp" ("timestamp") `)
        await db.query(`CREATE INDEX "IDX_21dec6975ac5df4cb0cf36a117" ON "curve_lp" ("block_number") `)
        await db.query(`CREATE TABLE "frax_staking" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "block_number" integer NOT NULL, "frx_eth" numeric NOT NULL, CONSTRAINT "PK_8e4f242a30dc9aa67ce89dd9011" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_c40e57574ecb23502fa6755b03" ON "frax_staking" ("timestamp") `)
        await db.query(`CREATE INDEX "IDX_ac105b3fae6f14114535b8d0e2" ON "frax_staking" ("block_number") `)
        await db.query(`CREATE TABLE "morpho_aave" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "block_number" integer NOT NULL, "weth" numeric NOT NULL, CONSTRAINT "PK_8b9569518db5529db65205aaafe" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_3570ea91a91129f64a38665d39" ON "morpho_aave" ("timestamp") `)
        await db.query(`CREATE INDEX "IDX_1263cc804aa44983b8f146c2c4" ON "morpho_aave" ("block_number") `)
        await db.query(`CREATE TABLE "dripper" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "block_number" integer NOT NULL, "weth" numeric NOT NULL, CONSTRAINT "PK_74fd102c8d1c60f4b1650a61ffc" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_88c58f8948c3294c2a9e2791dc" ON "dripper" ("timestamp") `)
        await db.query(`CREATE INDEX "IDX_06822c0a260797711acc9023d5" ON "dripper" ("block_number") `)
        await db.query(`ALTER TABLE "history" ADD CONSTRAINT "FK_59a55adcc59ddb69c297da693e5" FOREIGN KEY ("address_id") REFERENCES "address"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "rebase" ADD CONSTRAINT "FK_02d02f9022ef86e60f1a84b9dc2" FOREIGN KEY ("apy_id") REFERENCES "apy"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "rebase_option" ADD CONSTRAINT "FK_66c04aee6855c74debae4add8fe" FOREIGN KEY ("address_id") REFERENCES "address"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    }

    async down(db) {
        await db.query(`DROP TABLE "oeth"`)
        await db.query(`DROP INDEX "public"."IDX_5b81a67229bac2d68e0dc92cc4"`)
        await db.query(`DROP INDEX "public"."IDX_408e5f79f83093aa5cf2b0ea32"`)
        await db.query(`DROP TABLE "history"`)
        await db.query(`DROP INDEX "public"."IDX_59a55adcc59ddb69c297da693e"`)
        await db.query(`DROP INDEX "public"."IDX_7a259431108a22e8ca2f375fc7"`)
        await db.query(`DROP INDEX "public"."IDX_1b82c15d87635d95eaa4dd42ec"`)
        await db.query(`DROP TABLE "address"`)
        await db.query(`DROP TABLE "apy"`)
        await db.query(`DROP INDEX "public"."IDX_1f069a908b679be0b5fbc0b2e6"`)
        await db.query(`DROP INDEX "public"."IDX_7fb752652a983d6629a722ae7a"`)
        await db.query(`DROP INDEX "public"."IDX_d1165411d71160d1230073d0fa"`)
        await db.query(`DROP TABLE "rebase"`)
        await db.query(`DROP INDEX "public"."IDX_c308a9ecd3d05b0c45e7c60d10"`)
        await db.query(`DROP INDEX "public"."IDX_a5955dbd9ac031314697cbd54f"`)
        await db.query(`DROP INDEX "public"."IDX_7cd793b6c4bc15b9082e0eb97a"`)
        await db.query(`DROP INDEX "public"."IDX_02d02f9022ef86e60f1a84b9dc"`)
        await db.query(`DROP TABLE "rebase_option"`)
        await db.query(`DROP INDEX "public"."IDX_751e6b6352737ddf4f0da0d6d8"`)
        await db.query(`DROP INDEX "public"."IDX_e59c9a534fcf23a97a8ac92afa"`)
        await db.query(`DROP INDEX "public"."IDX_6b6c08ec25dacd1a5bd6170152"`)
        await db.query(`DROP INDEX "public"."IDX_66c04aee6855c74debae4add8f"`)
        await db.query(`DROP TABLE "vault"`)
        await db.query(`DROP INDEX "public"."IDX_0f1a5b7e346813a4ec3a03010b"`)
        await db.query(`DROP INDEX "public"."IDX_a9b314451a9001a7b0a222f68a"`)
        await db.query(`DROP TABLE "curve_lp"`)
        await db.query(`DROP INDEX "public"."IDX_330db36ce24d451bd225362497"`)
        await db.query(`DROP INDEX "public"."IDX_21dec6975ac5df4cb0cf36a117"`)
        await db.query(`DROP TABLE "frax_staking"`)
        await db.query(`DROP INDEX "public"."IDX_c40e57574ecb23502fa6755b03"`)
        await db.query(`DROP INDEX "public"."IDX_ac105b3fae6f14114535b8d0e2"`)
        await db.query(`DROP TABLE "morpho_aave"`)
        await db.query(`DROP INDEX "public"."IDX_3570ea91a91129f64a38665d39"`)
        await db.query(`DROP INDEX "public"."IDX_1263cc804aa44983b8f146c2c4"`)
        await db.query(`DROP TABLE "dripper"`)
        await db.query(`DROP INDEX "public"."IDX_88c58f8948c3294c2a9e2791dc"`)
        await db.query(`DROP INDEX "public"."IDX_06822c0a260797711acc9023d5"`)
        await db.query(`ALTER TABLE "history" DROP CONSTRAINT "FK_59a55adcc59ddb69c297da693e5"`)
        await db.query(`ALTER TABLE "rebase" DROP CONSTRAINT "FK_02d02f9022ef86e60f1a84b9dc2"`)
        await db.query(`ALTER TABLE "rebase_option" DROP CONSTRAINT "FK_66c04aee6855c74debae4add8fe"`)
    }
}
